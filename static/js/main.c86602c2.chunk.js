(this["webpackJsonpvirtual-background-demo"]=this["webpackJsonpvirtual-background-demo"]||[]).push([[0],{13:function(e,n,t){},15:function(e,n,t){},17:function(e,n,t){"use strict";t.r(n);var i=t(1),r=t.n(i),c=t(5),u=t.n(c),l=(t(13),t(3)),o=t.n(l),a=t(6),d=t(7),s=t(8),v=t.p+"static/media/alo.20246286.jpg",f=(t(15),t(0)),b=function(){var e=Object(i.useRef)(null),n=Object(i.useRef)(null),t=Object(i.useRef)(null),r=Object(i.useRef)(null),c=Object(i.useRef)(null),u=Object(i.useRef)(null);Object(i.useEffect)((function(){l()}),[]),Object(i.useEffect)((function(){var e;(null===n||void 0===n?void 0:n.current)&&(u.current=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.getContext("2d"),b())}),[n]),Object(i.useEffect)((function(){b(c)}),[c]);var l=function(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(n){e.current.srcObject=n})).catch((function(n){e.current.srcObject=null}))},b=function(n){c.current=n;var t=new d.SelfieSegmentation({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/".concat(e)}});t.setOptions({selfieMode:!0,modelSelection:1}),t.onResults(h);var i=new s.Camera(null===e||void 0===e?void 0:e.current,{onFrame:function(){var n=Object(a.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.send({image:null===e||void 0===e?void 0:e.current});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),width:480,height:320});i.start(),p()},h=function(e){var t,i;switch(m(),c.current&&(u.current.filter="blur(".concat(10,"px)"),g(e.segmentationMask),u.current.globalCompositeOperation="source-in",u.current.filter="none"),u.current.drawImage(e.image,0,0,null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.width,null===n||void 0===n||null===(i=n.current)||void 0===i?void 0:i.height),c.current){case"blur":j(!0,e.image);break;case"virtual":j(!1,null===r||void 0===r?void 0:r.current);break;default:j(!1,e.image)}u.current.restore()},j=function(e,t){var i,r,c=e?10:0;u.current.globalCompositeOperation="destination-over",u.current.filter="blur(".concat(c,"px)"),u.current.drawImage(t,0,0,null===n||void 0===n||null===(i=n.current)||void 0===i?void 0:i.width,null===n||void 0===n||null===(r=n.current)||void 0===r?void 0:r.height)},g=function(e){var t,i,r;null===u||void 0===u||null===(t=u.current)||void 0===t||t.drawImage(e,0,0,null===n||void 0===n||null===(i=n.current)||void 0===i?void 0:i.width,null===n||void 0===n||null===(r=n.current)||void 0===r?void 0:r.height)},m=function(){var e,t,i;null===u||void 0===u||null===(e=u.current)||void 0===e||e.clearRect(0,0,null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.width,null===n||void 0===n||null===(i=n.current)||void 0===i?void 0:i.height)},p=function(){var e,i=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.captureStream();t.current.srcObject=i};return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"video-container",children:[Object(f.jsx)("video",{id:"video-result",className:"video-result",ref:t,width:"480",height:"320",autoPlay:!0,playsInline:!0}),Object(f.jsx)("canvas",{className:"output-canvas",ref:n,width:"480px",height:"320px"}),Object(f.jsx)("video",{id:"video",className:"video",ref:e,width:"480",height:"320",autoPlay:!0,playsInline:!0})]}),Object(f.jsx)("img",{ref:r,src:v,alt:"bg"}),Object(f.jsxs)("div",{className:"btn-group",children:[Object(f.jsx)("button",{className:"btn",onClick:function(){return b("blur")},children:"Blur"}),Object(f.jsx)("button",{className:"btn",onClick:function(){return b("virtual")},children:"Image"}),Object(f.jsx)("button",{className:"btn",onClick:function(){return b(null)},children:"Clear"})]})]})},h=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,18)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,c=n.getLCP,u=n.getTTFB;t(e),i(e),r(e),c(e),u(e)}))};u.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(b,{})}),document.getElementById("root")),h()}},[[17,1,2]]]);
//# sourceMappingURL=main.c86602c2.chunk.js.map