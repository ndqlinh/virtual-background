(this["webpackJsonpvirtual-background-demo"]=this["webpackJsonpvirtual-background-demo"]||[]).push([[0],{14:function(e,n,t){},16:function(e,n,t){},18:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),c=t(5),o=t.n(c),u=(t(14),t(3)),l=t.n(u),a=t(6),s=t(9),d=t(7),v=t(8),f=(t(16),t(1)),b=function(){var e=Object(r.useRef)(null),n=Object(r.useRef)(null),t=Object(r.useRef)(null),i=Object(r.useRef)(null),c=Object(r.useRef)(null),o=Object(r.useState)(null),u=Object(s.a)(o,2),b=u[0],g=u[1];Object(r.useEffect)((function(){h()}),[]),Object(r.useEffect)((function(){var e;(null===n||void 0===n?void 0:n.current)&&(c.current=null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.getContext("2d"),console.log(123,"onLoadMediapipe"),m())}),[n]),Object(r.useEffect)((function(){var t;b&&(e.current.srcObject=b,c.current=null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.getContext("2d"))}),[b]),Object(r.useEffect)((function(){m()}),[i]);var h=function(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){g(e)})).catch((function(n){e.current.srcObject=null}))},m=function(n){i.current=n;var t=new d.SelfieSegmentation({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/".concat(e)}});t.setOptions({selfieMode:!0,modelSelection:1}),t.onResults(j);var r=new v.Camera(null===e||void 0===e?void 0:e.current,{onFrame:function(){var n=Object(a.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.send({image:null===e||void 0===e?void 0:e.current});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),width:480,height:320});r.start()},j=function(e){var r,o,u,l,a,s;switch(c.current.save(),c.current.clearRect(0,0,null===n||void 0===n||null===(r=n.current)||void 0===r?void 0:r.width,null===n||void 0===n||null===(o=n.current)||void 0===o?void 0:o.height),c.current.globalCompositeOperation="copy",c.current.filter="none",c.current.filter="blur(".concat(10,"px) brightness(").concat(115,"%)"),c.current.drawImage(e.segmentationMask,0,0,null===n||void 0===n||null===(u=n.current)||void 0===u?void 0:u.width,null===n||void 0===n||null===(l=n.current)||void 0===l?void 0:l.height),c.current.globalCompositeOperation="source-in",c.current.filter="none",c.current.drawImage(e.image,0,0,null===n||void 0===n||null===(a=n.current)||void 0===a?void 0:a.width,null===n||void 0===n||null===(s=n.current)||void 0===s?void 0:s.height),i.current){case"blur":p(!0,e.image);break;case"virtual":p(!1,null===t||void 0===t?void 0:t.current);break;default:p(!1,e.image)}c.current.restore()},p=function(e,t){var r,i;c.current.globalCompositeOperation="destination-over",c.current.filter=e?"blur(".concat(10,"px) brightness(").concat(115,"%)"):"none",c.current.drawImage(t,0,0,null===n||void 0===n||null===(r=n.current)||void 0===r?void 0:r.width,null===n||void 0===n||null===(i=n.current)||void 0===i?void 0:i.height)};return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("div",{className:"video-container",children:[Object(f.jsx)("canvas",{className:"output-canvas",ref:n,width:"480px",height:"320px"}),Object(f.jsx)("video",{id:"video",className:"video",ref:e,width:"480",height:"320",autoPlay:!0,playsInline:!0})]}),Object(f.jsx)("img",{ref:t,src:"https://images.mrandmrssmith.com/images/1482x988/4861210-intercontinental-danang-sun-peninsula-resort-hotel-sontra-peninsula-da-nang-vietnam.jpg",alt:"bg"}),Object(f.jsxs)("div",{className:"btn-group",children:[Object(f.jsx)("button",{className:"btn",onClick:function(){return m("blur")},children:"Blur"}),Object(f.jsx)("button",{className:"btn",onClick:function(){return m("virtual")},children:"Image"}),Object(f.jsx)("button",{className:"btn",onClick:function(){return m(null)},children:"Clear"})]})]})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,19)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),i(e),c(e),o(e)}))};o.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(b,{})}),document.getElementById("root")),g()}},[[18,1,2]]]);
//# sourceMappingURL=main.27b7fd6d.chunk.js.map